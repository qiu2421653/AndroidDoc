define("article:widget/dom-ready/dom-ready.js",function(e,t){function n(e){var t="http://tts.baidu.com/text2audio?tex=TEXTPLACEHOLDER&cuid=baiduid&lan=zh&ctp=1&pdt=311";if(e=encodeURIComponent(e),9===s.browser.ie||10===s.browser.ie||navigator.userAgent.search("rv:11.0")>-1)for(e=e.slice(0,2e3);;)try{decodeURIComponent(e);break}catch(n){e=e.slice(0,-1)}return t.replace("TEXTPLACEHOLDER",e)}function o(e){return(parseInt(e,10)+p.length)%p.length}function i(e){if(f[e])return f[e];var t=p[e];if(s.dom.getAttr(t,"data-text"))return s.dom.getAttr(t,"data-text");for(var n=t;(n=s.dom.getParent(n))&&!s.dom.hasClass(n,"exp-content-block"););var o=s.trim(s.dom.query(".exp-content-body",n)[0].innerText);return o="END"===o.slice(-3)?o.slice(0,-3):o,f[e]=o,o}function a(e){return e===m?(c.play(),s.dom.addClass(p[m],"playing"),1):(s.dom.removeClass(p[0>m?0:m],"playing"),m=o("next"===e?m+1:e),s.dom.addClass(p[m],"playing"),c.src=n(i(m)),void c.play())}function d(e){s.dom.removeClass(p[o(e)],"playing"),c.pause()}function r(){if("undefined"==typeof Audio)return 1;c=new Audio,p.forEach(function(e,t){s.dom.setAttr(e,"data-index",t),s.dom.setStyle(e,"display","inline-block"),s.on(e,"click",function(){var e=parseInt(s.dom.getAttr(this,"data-index"),10);return c.paused||e!==m?(a(e),void l.send(location.href,2019,{module:"article",page:"index",pos:"audio-play",action:"click"})):(d(e),l.send(location.href,2019,{module:"article",page:"index",pos:"audio-pause",action:"click"}),1)})}),c.addEventListener("ended",function(){s.dom.removeClass(p[m],"playing"),m<p.length-1&&a("next")},!1),c.addEventListener("play",function(){l.send(location.href,2019,{module:"article",page:"index",pos:"audio",action:"play"})},!1),u.on("douwan-video/play",function(){d(m)});var e=0;$(".bottom-text-ads").find("#EC_l").find("a").find(".EC_tit").each(function(t,n){"block"===$(n).css("display")&&"hidden"!==$(n).css("visibility")&&e++}),l.send(window.location,2019,{module:"article",page:"index",pos:"bottom",action:"show",adCount:e})}var c,s=e("common:widget/lib/tangram/base/base.js"),l=e("common:widget/ui/log/log.js"),u=e("common:widget/lib/fis/event/event.js").eventCenter,m=-1,p=s.dom.query(".audio-wp"),f=[];t.init=r});